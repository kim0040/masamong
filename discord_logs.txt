{"timestamp": "2025-09-16T16:13:58.187540+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.187798+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.188963+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.189404+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:61", "function": "get_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.189953+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.191099+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.191798+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.192665+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:36", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.193428+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.193863+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.194054+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:51", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 33, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.196999+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:58.197715+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:59.300025+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:59.304480+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:13:59.306598+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:00.409285+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:00.414067+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:00.416356+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:01.518853+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:01.522341+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:01.524670+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.627427+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.628124+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.631617+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.633338+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.634305+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.636145+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.637225+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.637731+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.641908+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.643632+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-16T07:14:02Z', 'endDateTime': '2025-10-16T07:14:02Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.644216+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.645677+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.646547+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-16T07:14:02Z', 'endDateTime': '2025-10-16T07:14:02Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.646887+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.650211+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.650643+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.651971+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.653203+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.653621+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.654648+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.655745+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:14:02.658136+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (2-step). Query: 'Tell me about Testville'", "source": "ai_handler.py:223", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "286aeb3b"}
{"timestamp": "2025-09-16T16:14:02.658463+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 호출 시작...", "source": "ai_handler.py:238", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "286aeb3b"}
{"timestamp": "2025-09-16T16:14:02.658810+09:00", "level": "INFO", "name": "root", "message": "Lite 모델 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}...'", "source": "ai_handler.py:247", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "286aeb3b"}
{"timestamp": "2025-09-16T16:14:02.659004+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용으로 판단. Tool: {'tool_to_use': 'get_travel_recommendation', 'parameters': {'location_name': 'Testville'}}", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "286aeb3b"}
{"timestamp": "2025-09-16T16:14:02.659100+09:00", "level": "INFO", "name": "root", "message": "2단계: Main 모델 호출 시작...", "source": "ai_handler.py:269", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "286aeb3b"}
{"timestamp": "2025-09-16T16:14:02.659163+09:00", "level": "INFO", "name": "root", "message": "여행 추천 도구 결과에 특수 프롬프트를 사용합니다.", "source": "ai_handler.py:279", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "286aeb3b"}
{"timestamp": "2025-09-16T16:14:02.659301+09:00", "level": "INFO", "name": "root", "message": "Main 모델이 최종 답변을 생성했습니다.", "source": "ai_handler.py:296", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "286aeb3b"}
{"timestamp": "2025-09-16T16:15:10.694970+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.695400+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.723014+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.724986+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.726857+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.727539+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.728482+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:36", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.729234+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.729889+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.730088+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:51", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 33, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.733331+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:10.733808+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:11.835915+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:11.839872+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:11.841854+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:12.944447+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:12.949113+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:12.952130+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:14.054860+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:14.058092+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:14.060107+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.162717+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.163144+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.165853+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.167391+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.168377+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.170048+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.171166+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.171710+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.176183+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.184643+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.189098+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.189486+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.190435+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.191937+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.192281+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.192998+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.193841+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:15:15.195959+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (2-step). Query: 'Tell me about Testville'", "source": "ai_handler.py:223", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "23c2d595"}
{"timestamp": "2025-09-16T16:15:15.196249+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 호출 시작...", "source": "ai_handler.py:238", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "23c2d595"}
{"timestamp": "2025-09-16T16:15:15.196400+09:00", "level": "INFO", "name": "root", "message": "Lite 모델 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}...'", "source": "ai_handler.py:247", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "23c2d595"}
{"timestamp": "2025-09-16T16:15:15.196579+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용으로 판단. Tool: {'tool_to_use': 'get_travel_recommendation', 'parameters': {'location_name': 'Testville'}}", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "23c2d595"}
{"timestamp": "2025-09-16T16:15:15.196659+09:00", "level": "INFO", "name": "root", "message": "2단계: Main 모델 호출 시작...", "source": "ai_handler.py:269", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "23c2d595"}
{"timestamp": "2025-09-16T16:15:15.196713+09:00", "level": "INFO", "name": "root", "message": "여행 추천 도구 결과에 특수 프롬프트를 사용합니다.", "source": "ai_handler.py:279", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "23c2d595"}
{"timestamp": "2025-09-16T16:15:15.196851+09:00", "level": "INFO", "name": "root", "message": "Main 모델이 최종 답변을 생성했습니다.", "source": "ai_handler.py:296", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "23c2d595"}
{"timestamp": "2025-09-16T16:16:08.867433+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.867815+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.894111+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.894609+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.895189+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.896956+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.897655+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.898650+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:36", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.899444+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.899813+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.900208+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:51", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 33, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.903310+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:08.903774+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:10.006017+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:10.009818+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:10.011674+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:11.114316+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:11.117795+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:11.120821+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:12.223323+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:12.226541+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:12.228726+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.331456+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.332073+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.336028+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.338327+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.339757+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.342262+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.344197+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.344814+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.349829+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.350958+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-16T07:16:13Z', 'endDateTime': '2025-10-16T07:16:13Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.351477+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.352657+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.353475+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-16T07:16:13Z', 'endDateTime': '2025-10-16T07:16:13Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.353824+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.357333+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.357799+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.361679+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.363077+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.363479+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.364186+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.365401+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:13.367461+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (2-step). Query: 'Tell me about Testville'", "source": "ai_handler.py:223", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2de7372c"}
{"timestamp": "2025-09-16T16:16:13.367716+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 호출 시작...", "source": "ai_handler.py:238", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2de7372c"}
{"timestamp": "2025-09-16T16:16:13.367865+09:00", "level": "INFO", "name": "root", "message": "Lite 모델 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}...'", "source": "ai_handler.py:247", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2de7372c"}
{"timestamp": "2025-09-16T16:16:13.368043+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용으로 판단. Tool: {'tool_to_use': 'get_travel_recommendation', 'parameters': {'location_name': 'Testville'}}", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2de7372c"}
{"timestamp": "2025-09-16T16:16:13.368127+09:00", "level": "INFO", "name": "root", "message": "2단계: Main 모델 호출 시작...", "source": "ai_handler.py:269", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2de7372c"}
{"timestamp": "2025-09-16T16:16:13.368184+09:00", "level": "INFO", "name": "root", "message": "여행 추천 도구 결과에 특수 프롬프트를 사용합니다.", "source": "ai_handler.py:279", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2de7372c"}
{"timestamp": "2025-09-16T16:16:13.368324+09:00", "level": "INFO", "name": "root", "message": "Main 모델이 최종 답변을 생성했습니다.", "source": "ai_handler.py:296", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2de7372c"}
{"timestamp": "2025-09-16T16:16:25.221023+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.221280+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.222407+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.222833+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.223352+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.224423+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.225053+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.225708+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:36", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.226520+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.226934+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.227175+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:51", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 33, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.229699+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:25.230432+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:26.332413+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:26.335664+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:26.337923+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:27.440857+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:27.446272+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:27.448661+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:28.551421+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:28.555116+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:28.558104+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.660845+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.661497+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.666874+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.668962+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.670724+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.673446+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.674825+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.675554+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.680166+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.682000+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-16T07:16:29Z', 'endDateTime': '2025-10-16T07:16:29Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.682656+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.684033+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.684769+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-16T07:16:29Z', 'endDateTime': '2025-10-16T07:16:29Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.685093+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.688551+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.689073+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.692752+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.694510+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.694977+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.695810+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.696901+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:16:29.699479+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (2-step). Query: 'Tell me about Testville'", "source": "ai_handler.py:223", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "27950940"}
{"timestamp": "2025-09-16T16:16:29.699762+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 호출 시작...", "source": "ai_handler.py:238", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "27950940"}
{"timestamp": "2025-09-16T16:16:29.699922+09:00", "level": "INFO", "name": "root", "message": "Lite 모델 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}...'", "source": "ai_handler.py:247", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "27950940"}
{"timestamp": "2025-09-16T16:16:29.700275+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용으로 판단. Tool: {'tool_to_use': 'get_travel_recommendation', 'parameters': {'location_name': 'Testville'}}", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "27950940"}
{"timestamp": "2025-09-16T16:16:29.700366+09:00", "level": "INFO", "name": "root", "message": "2단계: Main 모델 호출 시작...", "source": "ai_handler.py:269", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "27950940"}
{"timestamp": "2025-09-16T16:16:29.700423+09:00", "level": "INFO", "name": "root", "message": "여행 추천 도구 결과에 특수 프롬프트를 사용합니다.", "source": "ai_handler.py:279", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "27950940"}
{"timestamp": "2025-09-16T16:16:29.700556+09:00", "level": "INFO", "name": "root", "message": "Main 모델이 최종 답변을 생성했습니다.", "source": "ai_handler.py:296", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "27950940"}
{"timestamp": "2025-09-16T16:25:54.902832+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.903196+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.904188+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.904569+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.905186+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.906372+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.907013+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.907818+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:36", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.908740+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.909205+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:29", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.909408+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:51", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 33, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.913203+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:54.913959+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:56.015914+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:56.018606+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:56.020052+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:57.122987+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:57.125696+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:57.126901+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:58.230370+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:58.235177+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:58.237830+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.339992+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.340166+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.341385+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.342341+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.342772+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.343811+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.344378+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.344605+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.346795+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.347673+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-16T07:25:59Z', 'endDateTime': '2025-10-16T07:25:59Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.348030+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.348773+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.349287+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-16T07:25:59Z', 'endDateTime': '2025-10-16T07:25:59Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.349478+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.351506+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.351766+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.354140+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.355034+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.355300+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.355830+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.356491+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-16T16:25:59.357992+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (2-step). Query: 'Tell me about Testville'", "source": "ai_handler.py:235", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "81a57688"}
{"timestamp": "2025-09-16T16:25:59.358227+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 호출 시작...", "source": "ai_handler.py:250", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "81a57688"}
{"timestamp": "2025-09-16T16:25:59.358340+09:00", "level": "INFO", "name": "root", "message": "Lite 모델 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}...'", "source": "ai_handler.py:259", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "81a57688"}
{"timestamp": "2025-09-16T16:25:59.358590+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용으로 판단. Tool: {'tool_to_use': 'get_travel_recommendation', 'parameters': {'location_name': 'Testville'}}", "source": "ai_handler.py:270", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "81a57688"}
{"timestamp": "2025-09-16T16:25:59.358653+09:00", "level": "INFO", "name": "root", "message": "2단계: Main 모델 호출 시작...", "source": "ai_handler.py:281", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "81a57688"}
{"timestamp": "2025-09-16T16:25:59.358695+09:00", "level": "INFO", "name": "root", "message": "여행 추천 도구 결과에 특수 프롬프트를 사용합니다.", "source": "ai_handler.py:291", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "81a57688"}
{"timestamp": "2025-09-16T16:25:59.358791+09:00", "level": "INFO", "name": "root", "message": "Main 모델이 최종 답변을 생성했습니다.", "source": "ai_handler.py:308", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "81a57688"}
{"timestamp": "2025-09-18T03:34:35.799199+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.799612+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.800600+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.801187+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.801655+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.802415+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.803004+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.803755+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:38", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.804456+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.804942+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.805162+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:53", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 35, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.808648+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:35.809384+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:36.911229+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:36.913667+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:36.914859+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:38.017026+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:38.019655+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:38.021128+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:39.123483+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:39.125524+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:39.126454+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.228687+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.229504+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.232129+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.233693+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.234662+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.236302+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.237688+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.238097+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.242914+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.243814+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:34:40Z', 'endDateTime': '2025-10-17T18:34:40Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.244305+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.245393+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.246078+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:34:40Z', 'endDateTime': '2025-10-17T18:34:40Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.246367+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.249842+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.250210+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.253604+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.291590+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.291889+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.292414+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.294882+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.296406+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (PM v5.2). Query: 'Tell me about Testville'", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2c9585f1"}
{"timestamp": "2025-09-18T03:34:40.296612+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 (PM) 호출 시작...", "source": "ai_handler.py:273", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2c9585f1"}
{"timestamp": "2025-09-18T03:34:40.296727+09:00", "level": "INFO", "name": "root", "message": "Lite 모델(PM) 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}}</tool_call>...'", "source": "ai_handler.py:282", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2c9585f1"}
{"timestamp": "2025-09-18T03:34:40.296900+09:00", "level": "INFO", "name": "root", "message": "단일 도구 호출(call)을 파싱했습니다.", "source": "ai_handler.py:226", "function": "_parse_tool_calls", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:34:40.296947+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용 계획 발견. 총 1단계.", "source": "ai_handler.py:295", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2c9585f1"}
{"timestamp": "2025-09-18T03:34:40.296988+09:00", "level": "INFO", "name": "root", "message": "계획 실행 (1/1): get_travel_recommendation", "source": "ai_handler.py:300", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2c9585f1"}
{"timestamp": "2025-09-18T03:34:40.297043+09:00", "level": "INFO", "name": "root", "message": "3단계: Main 모델 호출 시작...", "source": "ai_handler.py:322", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2c9585f1"}
{"timestamp": "2025-09-18T03:34:40.297884+09:00", "level": "INFO", "name": "root", "message": "Main 모델이 최종 답변을 생성했습니다.", "source": "ai_handler.py:340", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "2c9585f1"}
{"timestamp": "2025-09-18T03:36:14.754328+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.754677+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.755664+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.756224+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.756693+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.757439+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.758024+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.758778+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:38", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.759445+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.759812+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.759998+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:53", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 35, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.763232+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:14.763920+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:15.865799+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:15.867956+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:15.868937+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:16.971211+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:16.974877+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:16.977022+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:18.080446+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:18.083856+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:18.085358+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.187616+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.188017+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.190656+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.192181+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.193207+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.194926+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.196281+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.196713+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.201483+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.202437+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:36:19Z', 'endDateTime': '2025-10-17T18:36:19Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.202916+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.203972+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.204662+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:36:19Z', 'endDateTime': '2025-10-17T18:36:19Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.204964+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.208483+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.208850+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.212359+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.248607+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.248944+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.249518+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.252258+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.253839+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (PM v5.2). Query: 'Tell me about Testville'", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9e6908a0"}
{"timestamp": "2025-09-18T03:36:19.254044+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 (PM) 호출 시작...", "source": "ai_handler.py:273", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9e6908a0"}
{"timestamp": "2025-09-18T03:36:19.254171+09:00", "level": "INFO", "name": "root", "message": "Lite 모델(PM) 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}}</tool_call>...'", "source": "ai_handler.py:282", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9e6908a0"}
{"timestamp": "2025-09-18T03:36:19.254358+09:00", "level": "INFO", "name": "root", "message": "단일 도구 호출(call)을 파싱했습니다.", "source": "ai_handler.py:226", "function": "_parse_tool_calls", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:36:19.254406+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용 계획 발견. 총 1단계.", "source": "ai_handler.py:295", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9e6908a0"}
{"timestamp": "2025-09-18T03:36:19.254451+09:00", "level": "INFO", "name": "root", "message": "계획 실행 (1/1): get_travel_recommendation", "source": "ai_handler.py:300", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9e6908a0"}
{"timestamp": "2025-09-18T03:36:19.254510+09:00", "level": "INFO", "name": "root", "message": "3단계: Main 모델 호출 시작...", "source": "ai_handler.py:322", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9e6908a0"}
{"timestamp": "2025-09-18T03:36:19.255369+09:00", "level": "INFO", "name": "root", "message": "Main 모델이 최종 답변을 생성했습니다.", "source": "ai_handler.py:349", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9e6908a0"}
{"timestamp": "2025-09-18T03:38:05.665707+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.666114+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.667152+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.667697+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.668190+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.669057+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.669716+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.670450+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:38", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.671115+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.671566+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.671767+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:53", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 35, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.675256+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:05.676004+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:06.777572+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:06.778915+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:06.779611+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:07.881228+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:07.882575+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:07.883331+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:08.987109+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:08.988498+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:08.989200+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.090744+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.090900+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.091978+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.092547+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.092853+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.093595+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.094112+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.094604+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.096912+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.097494+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:38:10Z', 'endDateTime': '2025-10-17T18:38:10Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.097804+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.098470+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.098938+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:38:10Z', 'endDateTime': '2025-10-17T18:38:10Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.099203+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.101511+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.101809+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.102587+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.103408+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.103644+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.104086+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.104723+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:10.106453+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (PM v5.2). Query: 'Tell me about Testville'", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "f89cea7f"}
{"timestamp": "2025-09-18T03:38:10.106626+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 (PM) 호출 시작...", "source": "ai_handler.py:273", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "f89cea7f"}
{"timestamp": "2025-09-18T03:38:10.106863+09:00", "level": "ERROR", "name": "root", "message": "Gemini 응답 생성 중 예기치 않은 오류: object MagicMock can't be used in 'await' expression", "source": "ai_handler.py:97", "function": "_safe_generate_content", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/cogs/ai_handler.py\", line 68, in _safe_generate_content\n    if await db_utils.check_api_rate_limit(self.bot.db, limit_key, rpm, rpd):\n       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/gimhyeonmin/masamong/utils/db.py\", line 123, in check_api_rate_limit\n    await db.execute(\"DELETE FROM api_call_log WHERE called_at < ?\", (one_day_ago,))\nTypeError: object MagicMock can't be used in 'await' expression", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "f89cea7f"}
{"timestamp": "2025-09-18T03:38:10.108166+09:00", "level": "ERROR", "name": "root", "message": "Lite 모델(PM)이 응답을 생성하지 못했습니다.", "source": "ai_handler.py:277", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "f89cea7f"}
{"timestamp": "2025-09-18T03:38:28.183961+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.184200+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.185161+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.185748+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.186213+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.187009+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.187597+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.188128+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:38", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.188813+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.189320+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.189560+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:53", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 35, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.197542+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:28.198179+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:29.299971+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:29.302099+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:29.303322+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:30.405235+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:30.406863+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:30.407712+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:31.512891+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:31.514738+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:31.515710+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.617572+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.617821+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.619654+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.620734+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.621346+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.622679+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.623430+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.624111+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.627291+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.628286+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:38:32Z', 'endDateTime': '2025-10-17T18:38:32Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.628730+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.629713+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.630368+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:38:32Z', 'endDateTime': '2025-10-17T18:38:32Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.630629+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.633735+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.634122+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.635266+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.636407+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.636743+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.637563+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.638469+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:32.641141+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (PM v5.2). Query: 'Tell me about Testville'", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "1daf5272"}
{"timestamp": "2025-09-18T03:38:32.641303+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 (PM) 호출 시작...", "source": "ai_handler.py:273", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "1daf5272"}
{"timestamp": "2025-09-18T03:38:32.641650+09:00", "level": "ERROR", "name": "root", "message": "Gemini 응답 생성 중 예기치 않은 오류: 'coroutine' object does not support the asynchronous context manager protocol", "source": "ai_handler.py:97", "function": "_safe_generate_content", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/cogs/ai_handler.py\", line 68, in _safe_generate_content\n    if await db_utils.check_api_rate_limit(self.bot.db, limit_key, rpm, rpd):\n       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/gimhyeonmin/masamong/utils/db.py\", line 126, in check_api_rate_limit\n    async with db.execute(\"SELECT COUNT(*) FROM api_call_log WHERE api_type = ? AND called_at >= ?\", (api_type, one_day_ago)) as cursor:\n               ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: 'coroutine' object does not support the asynchronous context manager protocol", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "1daf5272"}
{"timestamp": "2025-09-18T03:38:32.642773+09:00", "level": "ERROR", "name": "root", "message": "Lite 모델(PM)이 응답을 생성하지 못했습니다.", "source": "ai_handler.py:277", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "1daf5272"}
{"timestamp": "2025-09-18T03:38:55.581358+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.581805+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.582767+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.583322+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.583788+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.584653+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.585303+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.585948+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:38", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.586702+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.587080+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.587300+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:53", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 35, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.590044+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:55.590723+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:56.692920+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:56.696996+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:56.699202+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:57.801638+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:57.803835+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:57.804986+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:58.909869+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:58.911667+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:38:58.912692+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.014850+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.015284+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.018171+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.019851+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.020863+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.022652+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.023819+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.024844+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.029658+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.030860+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:39:00Z', 'endDateTime': '2025-10-17T18:39:00Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.031567+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.033049+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.033914+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:39:00Z', 'endDateTime': '2025-10-17T18:39:00Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.034251+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.038157+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.038682+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.040378+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.042067+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.042697+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.043571+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.044584+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.047864+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (PM v5.2). Query: 'Tell me about Testville'", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9efda34d"}
{"timestamp": "2025-09-18T03:39:00.048070+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 (PM) 호출 시작...", "source": "ai_handler.py:273", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9efda34d"}
{"timestamp": "2025-09-18T03:39:00.048428+09:00", "level": "INFO", "name": "root", "message": "Lite 모델(PM) 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}}</tool_call>...'", "source": "ai_handler.py:282", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9efda34d"}
{"timestamp": "2025-09-18T03:39:00.048721+09:00", "level": "INFO", "name": "root", "message": "단일 도구 호출(call)을 파싱했습니다.", "source": "ai_handler.py:226", "function": "_parse_tool_calls", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:00.048803+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용 계획 발견. 총 1단계.", "source": "ai_handler.py:295", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9efda34d"}
{"timestamp": "2025-09-18T03:39:00.048870+09:00", "level": "INFO", "name": "root", "message": "계획 실행 (1/1): get_travel_recommendation", "source": "ai_handler.py:300", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9efda34d"}
{"timestamp": "2025-09-18T03:39:00.048970+09:00", "level": "INFO", "name": "root", "message": "3단계: Main 모델 호출 시작...", "source": "ai_handler.py:322", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9efda34d"}
{"timestamp": "2025-09-18T03:39:00.049099+09:00", "level": "ERROR", "name": "root", "message": "에이전트 처리 중 최상위 오류: 'coroutine' object does not support the asynchronous context manager protocol", "source": "ai_handler.py:357", "function": "process_agent_message", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/cogs/ai_handler.py\", line 341, in process_agent_message\n    custom_persona = await db_utils.get_guild_setting(self.bot.db, message.guild.id, 'persona_text')\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/gimhyeonmin/masamong/utils/db.py\", line 49, in get_guild_setting\n    async with db.execute(f\"SELECT {setting_name} FROM guild_settings WHERE guild_id = ?\", (guild_id,)) as cursor:\n               ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: 'coroutine' object does not support the asynchronous context manager protocol", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "9efda34d"}
{"timestamp": "2025-09-18T03:39:23.099527+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.099746+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.100694+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.101248+09:00", "level": "WARNING", "name": "root", "message": "수출입은행 환율 API 응답에서 'EUR' 통화를 찾지 못했습니다.", "source": "exim.py:59", "function": "get_krw_exchange_rate", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.101705+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.102446+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.102996+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.103591+09:00", "level": "DEBUG", "name": "root", "message": "Foursquare API 응답 수신: {'results': [{'name': 'Tokyo Tower', 'location': {'formatted_address': 'Tokyo, Japan'}, 'categories': [{'name': 'Landmark'}]}]}", "source": "foursquare.py:38", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.104289+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.104638+09:00", "level": "INFO", "name": "root", "message": "Foursquare API 요청: URL='https://api.foursquare.com/v3/places/search', Params='{'ll': '35.68,139.69', 'limit': 10, 'sort': 'RELEVANCE'}'", "source": "foursquare.py:30", "function": "get_places_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.104813+09:00", "level": "ERROR", "name": "root", "message": "Foursquare API(35.68,139.69) 요청 중 오류: Network Error", "source": "foursquare.py:53", "function": "get_places_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/foursquare.py\", line 35, in get_places_by_coords\n    response = await asyncio.to_thread(session.get, url, headers=headers, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.107364+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:23.108035+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Eiffel Tower'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:24.209989+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 1, 'lat': '48.8583701', 'lon': '2.2944813', 'display_name': 'Eiffel Tower, Paris, France', 'address': {'country_code': 'fr'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:24.213309+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:24.214852+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Springfield'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:25.317058+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'display_name': 'Springfield, Illinois, USA'}, {'display_name': 'Springfield, Massachusetts, USA'}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:25.319866+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:25.321430+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'a_made_up_place_12345'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:26.427754+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: []", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:26.430023+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:26.431171+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache MISS for query: 'Tokyo'", "source": "nominatim.py:22", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.533029+09:00", "level": "DEBUG", "name": "root", "message": "Nominatim API 응답 수신: [{'place_id': 2, 'lat': '35.6895', 'lon': '139.6917', 'display_name': 'Tokyo, Japan', 'address': {'country_code': 'jp'}}]", "source": "nominatim.py:42", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.533300+09:00", "level": "INFO", "name": "root", "message": "Geocoding cache HIT for query: 'Tokyo'", "source": "nominatim.py:19", "function": "geocode_location", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.535428+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.536707+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.537411+09:00", "level": "DEBUG", "name": "root", "message": "OpenWeatherMap API 응답 수신: {'weather': [{'description': 'clear sky'}], 'main': {'temp': 25, 'feels_like': 26, 'humidity': 50}, 'wind': {'speed': 5}, 'sys': {'sunrise': 1622582400, 'sunset': 1622634000}}", "source": "openweathermap.py:34", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.538636+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.539438+09:00", "level": "INFO", "name": "root", "message": "OpenWeatherMap API 요청: URL='https://api.openweathermap.org/data/2.5/weather', Params='{'lat': 35.68, 'lon': 139.69, 'appid': '[REDACTED]', 'units': 'metric', 'lang': 'kr'}'", "source": "openweathermap.py:27", "function": "get_weather_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.540126+09:00", "level": "ERROR", "name": "root", "message": "OpenWeatherMap API(35.68,139.69) 요청 중 오류: Network Error", "source": "openweathermap.py:53", "function": "get_weather_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/openweathermap.py\", line 31, in get_weather_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=10)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.543355+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.544205+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:39:27Z', 'endDateTime': '2025-10-17T18:39:27Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.544687+09:00", "level": "DEBUG", "name": "root", "message": "Ticketmaster API 응답 수신: {'_embedded': {'events': [{'name': 'Rock Festival', 'url': 'http://example.com/rock', 'dates': {'start': {'localDate': '2025-09-01'}}}]}}", "source": "ticketmaster.py:40", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.545753+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.546463+09:00", "level": "INFO", "name": "root", "message": "Ticketmaster API 요청: URL='https://app.ticketmaster.com/discovery/v2/events.json', Params='{'apikey': 'DUMMY_API_KEY', 'latlong': '35.68,139.69', 'radius': 50, 'unit': 'km', 'startDateTime': '2025-09-17T18:39:27Z', 'endDateTime': '2025-10-17T18:39:27Z', 'sort': 'date,asc'}'", "source": "ticketmaster.py:33", "function": "get_events_by_coords", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.546740+09:00", "level": "ERROR", "name": "root", "message": "Ticketmaster API(35.68,139.69) 요청 중 오류: Network Error", "source": "ticketmaster.py:57", "function": "get_events_by_coords", "exc_info": "Traceback (most recent call last):\n  File \"/Users/gimhyeonmin/masamong/utils/api_handlers/ticketmaster.py\", line 37, in get_events_by_coords\n    response = await asyncio.to_thread(session.get, url, params=params, timeout=15)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/threads.py\", line 25, in to_thread\n    return await loop.run_in_executor(None, func_call)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/concurrent/futures/thread.py\", line 59, in run\n    result = self.fn(*self.args, **self.kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1167, in __call__\n    return self._mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1171, in _mock_call\n    return self._execute_mock_call(*args, **kwargs)\n           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py\", line 1226, in _execute_mock_call\n    raise effect\nrequests.exceptions.RequestException: Network Error", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.549720+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.550121+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.551427+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Seoul, South Korea' (37.56, 126.97), country: kr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.552793+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.553165+09:00", "level": "INFO", "name": "root", "message": "ToolsCog 초기화 완료.", "source": "tools_cog.py:28", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.553848+09:00", "level": "INFO", "name": "root", "message": "Travel recommendation for 'Paris, France' (48.85, 2.29), country: fr", "source": "tools_cog.py:49", "function": "get_travel_recommendation", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.554645+09:00", "level": "DEBUG", "name": "asyncio", "message": "Using selector: KqueueSelector", "source": "selector_events.py:64", "function": "__init__", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.557587+09:00", "level": "INFO", "name": "root", "message": "에이전트 처리 시작 (PM v5.2). Query: 'Tell me about Testville'", "source": "ai_handler.py:258", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "18ed0302"}
{"timestamp": "2025-09-18T03:39:27.557765+09:00", "level": "INFO", "name": "root", "message": "1단계: Lite 모델 (PM) 호출 시작...", "source": "ai_handler.py:273", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "18ed0302"}
{"timestamp": "2025-09-18T03:39:27.558084+09:00", "level": "INFO", "name": "root", "message": "Lite 모델(PM) 응답: '<tool_call>{\"tool_to_use\": \"get_travel_recommendation\", \"parameters\": {\"location_name\": \"Testville\"}}</tool_call>...'", "source": "ai_handler.py:282", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "18ed0302"}
{"timestamp": "2025-09-18T03:39:27.558336+09:00", "level": "INFO", "name": "root", "message": "단일 도구 호출(call)을 파싱했습니다.", "source": "ai_handler.py:226", "function": "_parse_tool_calls", "trace_id": "N/A"}
{"timestamp": "2025-09-18T03:39:27.558402+09:00", "level": "INFO", "name": "root", "message": "분기: 도구 사용 계획 발견. 총 1단계.", "source": "ai_handler.py:295", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "18ed0302"}
{"timestamp": "2025-09-18T03:39:27.558461+09:00", "level": "INFO", "name": "root", "message": "계획 실행 (1/1): get_travel_recommendation", "source": "ai_handler.py:300", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "18ed0302"}
{"timestamp": "2025-09-18T03:39:27.558542+09:00", "level": "INFO", "name": "root", "message": "3단계: Main 모델 호출 시작...", "source": "ai_handler.py:322", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "18ed0302"}
{"timestamp": "2025-09-18T03:39:27.558871+09:00", "level": "INFO", "name": "root", "message": "Main 모델이 최종 답변을 생성했습니다.", "source": "ai_handler.py:349", "function": "process_agent_message", "guild_id": 123, "user_id": 789, "channel_id": 456, "trace_id": "18ed0302"}

{
  "_comment": "=== 마사몽 RAG 검색 설정 ===",
  "_comment2": "이 파일에서 RAG/임베딩/검색 관련 모든 설정을 관리합니다.",
  "_comment3": "변경 후 봇을 재시작해야 적용됩니다.",
  "=== 검색 엔진 활성화 ===": "---",
  "embedding_enabled": true,
  "_embedding_enabled_desc": "임베딩 기반 의미 검색 (E5 모델). true=활성, false=비활성",
  "bm25_enabled": false,
  "_bm25_enabled_desc": "BM25 키워드 검색 (FTS5). true=활성, false=비활성",
  "reranker_enabled": false,
  "_reranker_enabled_desc": "Cross-Encoder 재정렬. 정확도↑ 속도↓. true=활성, false=비활성",
  "=== 임베딩 모델 설정 ===": "---",
  "embedding_model_name": "dragonkue/multilingual-e5-small-ko-v2",
  "_embedding_model_desc": "사용할 임베딩 모델. 한국어 최적화된 E5 모델 권장",
  "embedding_device": "cpu",
  "_embedding_device_desc": "cpu 또는 cuda (GPU). 저사양은 cpu 권장",
  "normalize_embeddings": true,
  "_normalize_embeddings_desc": "임베딩 벡터 정규화. true 권장",
  "=== 검색 파라미터 ===": "---",
  "similarity_threshold": 0.6,
  "_similarity_threshold_desc": "임베딩 유사도 최소 임계값 (0.0~1.0). 낮을수록 더 많은 결과 반환",
  "strong_similarity_threshold": 0.72,
  "_strong_similarity_threshold_desc": "강한 유사도 임계값. 이 이상이면 웹 검색 불필요",
  "hybrid_top_k": 5,
  "_hybrid_top_k_desc": "최종 반환할 검색 결과 수",
  "embedding_top_n": 8,
  "_embedding_top_n_desc": "임베딩 검색에서 가져올 후보 수",
  "bm25_top_n": 8,
  "_bm25_top_n_desc": "BM25 검색에서 가져올 후보 수 (bm25_enabled=false면 무시)",
  "query_limit": 200,
  "_query_limit_desc": "검색할 최대 임베딩 레코드 수",
  "=== 대화 윈도우 설정 ===": "---",
  "conversation_window_size": 12,
  "_conversation_window_size_desc": "한 윈도우에 포함되는 메시지 수",
  "conversation_window_stride": 6,
  "_conversation_window_stride_desc": "윈도우 이동 간격. 작을수록 중복↑ 정확도↑",
  "conversation_neighbor_radius": 3,
  "_conversation_neighbor_radius_desc": "검색 결과 주변으로 확장할 메시지 수",
  "=== 쿼리 확장 설정 ===": "---",
  "query_rewrite_enabled": false,
  "_query_rewrite_enabled_desc": "LLM으로 쿼리 변형 생성. 정확도↑ 비용↑",
  "query_rewrite_variants": 3,
  "_query_rewrite_variants_desc": "생성할 쿼리 변형 수",
  "=== BM25 자동 재구축 ===": "---",
  "bm25_auto_rebuild": {
    "enabled": false,
    "_enabled_desc": "자동 인덱스 재구축. 대화가 많으면 true 권장",
    "idle_minutes": 180,
    "_idle_minutes_desc": "재구축 전 유휴 대기 시간 (분)",
    "poll_minutes": 15,
    "_poll_minutes_desc": "재구축 체크 주기 (분)"
  },
  "=== 데이터베이스 경로 ===": "---",
  "discord_db_path": "database/discord_embeddings.db",
  "kakao_db_path": "database/kakao_embeddings.db",
  "bm25_db_path": "database/remasamong.db",
  "=== 카카오톡 대화 연동 ===": "---",
  "kakao_servers": [
    {
      "server_id": "912210558122598450",
      "db_path": "data/kakao_store/room1",
      "label": "노답형제들"
    },
    {
      "server_id": "949696135688253554",
      "db_path": "data/kakao_store/room2",
      "label": "연사모 동호회"
    },
    {
      "server_id": "1406585232752381970",
      "db_path": "data/kakao_store/room1",
      "label": "마사모 테스트서버"
    }
  ]
}